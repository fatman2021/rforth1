	processor pic18f248
	radix dec
	org 0x2000
	goto init_runtime
	org 0x2008
	goto _high
	org 0x2018
	goto _low

;---------------------------------------------------------
; Section: constants
;---------------------------------------------------------

; POSTDEC0: defined at lib/sfrnames.fs:25
POSTDEC0 equ 0xfed

; PREINC0: defined at lib/sfrnames.fs:26
PREINC0 equ 0xfec

; FSR0H: defined at lib/sfrnames.fs:28
FSR0H equ 0xfea

; FSR0L: defined at lib/sfrnames.fs:29
FSR0L equ 0xfe9

; FSR1L: defined at lib/sfrnames.fs:37
FSR1L equ 0xfe1

; FSR2L: defined at lib/sfrnames.fs:45
FSR2L equ 0xfd9

; STATUS: defined at lib/sfrnames.fs:46
STATUS equ 0xfd8

;---------------------------------------------------------
; Section: code
;---------------------------------------------------------

; init_runtime: defined at lib/primitives.fs:3
init_runtime
	movlb 1

; main: defined at tests/interrupts2.fs:16
main
	return

; handle-high: defined at tests/interrupts2.fs:1
handle_MI_high
	return

; handle-low: defined at tests/interrupts2.fs:2
handle_MI_low
	return

; high: defined at tests/interrupts2.fs:4
_high
	movwf high_MI_wtemp,0
	movff FSR0L,high_MI_fsr0ltemp
	movff FSR0H,high_MI_fsr0htemp
	movlw secstack_MI_high
	movwf FSR0L,0
	clrf (FSR0L+1),0
	movff STATUS,PREINC0
	clrf PREINC0,0
	movff FSR1L,PREINC0
	movff (FSR1L+1),PREINC0
	movff FSR2L,PREINC0
	movff (FSR2L+1),PREINC0
	movlw secrstack_MI_high
	movwf FSR2L,0
	clrf (FSR2L+1),0
	call handle_MI_high
	movff POSTDEC0,(FSR2L+1)
	movff POSTDEC0,FSR2L
	movff POSTDEC0,(FSR1L+1)
	movff POSTDEC0,FSR1L
	movf POSTDEC0,0,0
	movff POSTDEC0,STATUS
	movff high_MI_fsr0htemp,FSR0H
	movff high_MI_fsr0ltemp,FSR0L
	movf high_MI_wtemp,0,0
	retfie 0

; low: defined at tests/interrupts2.fs:10
_low
	movwf low_MI_wtemp,0
	movff FSR0L,low_MI_fsr0ltemp
	movff FSR0H,low_MI_fsr0htemp
	movlw secstack_MI_low
	movwf FSR0L,0
	clrf (FSR0L+1),0
	movff STATUS,PREINC0
	clrf PREINC0,0
	movff FSR1L,PREINC0
	movff (FSR1L+1),PREINC0
	movff FSR2L,PREINC0
	movff (FSR2L+1),PREINC0
	movlw secrstack_MI_low
	movwf FSR2L,0
	clrf (FSR2L+1),0
	call handle_MI_low
	movff POSTDEC0,(FSR2L+1)
	movff POSTDEC0,FSR2L
	movff POSTDEC0,(FSR1L+1)
	movff POSTDEC0,FSR1L
	movf POSTDEC0,0,0
	movff POSTDEC0,STATUS
	movff low_MI_fsr0htemp,FSR0H
	movff low_MI_fsr0ltemp,FSR0L
	movf low_MI_wtemp,0,0
	retfie 0

;---------------------------------------------------------
; Section: memory
;---------------------------------------------------------

; high-wtemp: defined at lib/interrupts.fs:1
high_MI_wtemp equ 0x21

; high-fsr0ltemp: defined at lib/interrupts.fs:2
high_MI_fsr0ltemp equ 0x22

; high-fsr0htemp: defined at lib/interrupts.fs:3
high_MI_fsr0htemp equ 0x23

; secstack-high: defined at lib/interrupts.fs:5
secstack_MI_high equ 0x24

; secrstack-high: defined at lib/interrupts.fs:6
secrstack_MI_high equ 0x3a

; low-wtemp: defined at lib/interrupts.fs:28
low_MI_wtemp equ 0x40

; low-fsr0ltemp: defined at lib/interrupts.fs:29
low_MI_fsr0ltemp equ 0x41

; low-fsr0htemp: defined at lib/interrupts.fs:30
low_MI_fsr0htemp equ 0x42

; secstack-low: defined at lib/interrupts.fs:32
secstack_MI_low equ 0x43

; secrstack-low: defined at lib/interrupts.fs:33
secrstack_MI_low equ 0x59

END
